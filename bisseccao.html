<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Encontrar Zeros de Qualquer Função (intervalos inteiros)</title>
  <style>
    body { font-family: Arial; max-width: 600px; margin: 20px auto; padding: 20px; }
    input, button { padding: 10px; margin: 10px 0; width: 100%; font-size: 16px; }
    pre { background: #f4f4f4; padding: 15px; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h2>Encontrar Zeros de Qualquer Função (intervalos inteiros)</h2>

  <label for="func">Função f(x):</label>
  <input type="text" id="func" placeholder="Ex: x**3 - 9*x + 3" />

  <button onclick="encontrarZeros()">Encontrar Zeros</button>

  <h3>Resultado:</h3>
  <pre id="resultado"></pre>

  <script>
    function bisseccao(f, a, b, tolerancia = 1e-7, maxIter = 100) {
      if (f(a) * f(b) >= 0) return null;

      const intervaloOriginal = [a, b];

      let c, erro;
      let iter = 0;

      while ((b - a) / 2 > tolerancia && iter < maxIter) {
        c = (a + b) / 2;
        erro = Math.abs(b - a) / 2;

        if (f(c) === 0 || erro < tolerancia) break;

        if (f(a) * f(c) < 0) {
          b = c;
        } else {
          a = c;
        }

        iter++;
      }

      return { raiz: c, erro: erro, iteracoes: iter, intervalo: intervaloOriginal };
    }

    function encontrarZeros() {
      const inputFunc = document.getElementById("func").value;
      const output = document.getElementById("resultado");
      output.textContent = "";

      let f;

      try {
        f = new Function("x", "return " + inputFunc);
        f(0);
      } catch (e) {
        output.textContent = "Erro na função: " + e.message;
        return;
      }

      const a = -100;
      const b = 100;

      const zeros = [];

      for(let x1 = a; x1 < b; x1++) {
        let x2 = x1 + 1;

        let y1 = f(x1);
        let y2 = f(x2);

        if (!isFinite(y1) || !isFinite(y2)) continue;

        if(y1 * y2 < 0) {
          const resultado = bisseccao(f, x1, x2);
          if (resultado) {
            const r = resultado.raiz;
            if (!zeros.some(z => Math.abs(z - r) < 1e-7)) {
              zeros.push(r);
              output.textContent +=
                `Intervalo inicial inteiro: [${resultado.intervalo[0]}, ${resultado.intervalo[1]}] | ` +
                `Raiz: x ≈ ${r.toFixed(10)} | Erro ≈ ${resultado.erro.toExponential(2)} | Iterações: ${resultado.iteracoes}\n`;
            }
          }
        }
      }

      if (zeros.length === 0) {
        output.textContent = "Nenhuma raiz encontrada no intervalo [-100, 100].";
      }
    }
  </script>
</body>
</html>
